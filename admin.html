<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë“í…œìƒí™œì—°êµ¬ì†Œ Â· ê´€ë¦¬ì</title>
  <meta name="description" content="Firebase Auth + Firestoreë¡œ ìƒí’ˆ ë“±ë¡/ìˆ˜ì •/ì‚­ì œ" />
  <style>
    :root{ --bg:#0b0c10; --muted:#a8b0bf; --text:#e9edf5; --accent:#5be3b4; --danger:#ff7a7a; }
    *{box-sizing:border-box}
    html,body{margin:0; padding:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif; color:var(--text); background:#0b0c10;}
    a{color:inherit; text-decoration:none}
    .container{max-width:1000px; margin:0 auto; padding:0 16px}
    header{position:sticky; top:0; z-index:10; backdrop-filter:saturate(140%) blur(8px); background:rgba(11,12,16,.7); border-bottom:1px solid rgba(255,255,255,.06)}
    .nav{display:flex; align-items:center; justify-content:space-between; min-height:64px}
    .brand{font-weight:700}
    .row{display:grid; grid-template-columns:1fr; gap:16px; padding:18px 0}
    @media (min-width:860px){ .row{grid-template-columns:1fr 1fr} }
    input, textarea, select{width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background:#0c0f14; color:var(--text)}
    textarea{min-height:84px; resize:vertical}
    .btn{border:1px solid rgba(255,255,255,.18); padding:10px 14px; border-radius:12px; font-weight:600; cursor:pointer}
    .btn.primary{background:linear-gradient(135deg,var(--accent),#7aa8ff); color:#0b0c10; border:0}
    .btn.danger{background:#2a1212; border-color:#5a2222}
    table{width:100%; border-collapse:collapse; margin:12px 0 28px}
    th,td{padding:10px 8px; text-align:left; border-bottom:1px solid rgba(255,255,255,.08)}
    th{font-size:14px; color:#cfe3ff; background:#0f131b; position:sticky; top:64px}
    .muted{color:var(--muted)}
    .login{max-width:420px; margin:40px auto; background:#0f131b; padding:18px; border-radius:12px; border:1px solid rgba(255,255,255,.08)}
    .msg{margin:10px 0; color:#ffd27a}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">ê´€ë¦¬ì í˜ì´ì§€</div>
      <nav>
        <a href="index.html" style="opacity:.7">â† ìŠ¤í† ì–´</a>
        <button id="logout" class="btn">ë¡œê·¸ì•„ì›ƒ</button>
      </nav>
    </div>
  </header>

  <main class="container">
    <section id="authSection" class="login" style="display:none">
      <h3>ê´€ë¦¬ì ë¡œê·¸ì¸</h3>
      <input id="email" type="email" placeholder="ì´ë©”ì¼" />
      <input id="password" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸" />
      <div class="msg" id="authMsg"></div>
      <div style="display:flex; gap:8px">
        <button id="login" class="btn primary">ë¡œê·¸ì¸</button>
        <button id="signup" class="btn">ê´€ë¦¬ì ê³„ì • ìƒì„±</button>
      </div>
      <p class="muted">* Firebase Consoleì—ì„œ Email/Password ì¸ì¦ì„ í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤.</p>
    </section>
    <!-- (1/3ì—ì„œ ì´ì–´ì§) -->

    <section id="appSection" style="display:none">
      <h2>ìƒí’ˆ ë“±ë¡/ìˆ˜ì •</h2>
      <div class="row">
        <div>
          <label>ìƒí’ˆëª…</label>
          <input id="name" placeholder="ì˜ˆ: ì‹œê·¸ë‹ˆì²˜ í›„ë””" />
        </div>
        <div>
          <label>ê°€ê²©</label>
          <input id="price" type="number" min="0" step="100" placeholder="ì˜ˆ: 59000" />
        </div>
        <div>
          <label>ì¹´í…Œê³ ë¦¬</label>
          <select id="category">
            <option>ì‹ ë°œ</option>
            <option>ì˜ë¥˜</option>
            <option>ì „ì</option>
            <option>ë¦¬ë¹™</option>
            <option>ìŠ¤í¬ì¸ </option>
          </select>
        </div>
        <div style="grid-column:1/-1">
          <label>ì„¤ëª…/ìŠ¤í™</label>
          <textarea id="specs" placeholder="ì˜ˆ: ì½”íŠ¼ë¸”ë Œë“œ / ì˜¤ë²„í•"></textarea>
        </div>
        <div style="grid-column:1/-1">
          <label>ì´ë¯¸ì§€ URL (ì„ íƒ)</label>
          <input id="imageUrl" placeholder="https://example.com/image.jpg" />
        </div>
        <div style="display:flex; gap:8px; grid-column:1/-1">
          <button id="save" class="btn primary">ì €ì¥</button>
          <button id="reset" class="btn">ì´ˆê¸°í™”</button>
          <div class="msg" id="saveMsg"></div>
        </div>
      </div>

      <h2>ìƒí’ˆ ë¦¬ìŠ¤íŠ¸</h2>
      <table>
        <thead>
          <tr>
            <th>ìƒí’ˆëª…</th>
            <th>ì¹´í…Œê³ ë¦¬</th>
            <th>ê°€ê²©</th>
            <th>ë“±ë¡ì¼</th>
            <th>ê´€ë¦¬</th>
          </tr>
        </thead>
        <tbody id="list">
          <!-- ìŠ¤í¬ë¦½íŠ¸(3/3)ì—ì„œ Firestore ë°ì´í„°ë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
        </tbody>
      </table>
    </section>
  </main>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore-compat.js"></script>

  <script>
    // ğŸ”‘ ì—¬ê¸°ë¥¼ Firebase Consoleì—ì„œ ë°œê¸‰ë°›ì€ ê°’ìœ¼ë¡œ êµì²´í•˜ì„¸ìš”
    const firebaseConfig = {
  apiKey: "AIzaSyA3ZFVJIU7t01qhoXM6DLo-XK_30OdN9YE",
  authDomain: "payteacher-9da3a.firebaseapp.com",
  projectId: "payteacher-9da3a",
  storageBucket: "payteacher-9da3a.firebasestorage.app",
  messagingSenderId: "1048224861169",
  appId: "1:1048224861169:web:d6ce67ea15bb7ce7f0d250",
  
    };

    // Firebase ì´ˆê¸°í™”
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // UI ìš”ì†Œë“¤
    const authSection = document.getElementById('authSection');
    const appSection  = document.getElementById('appSection');
    const emailEl = document.getElementById('email');
    const pwEl = document.getElementById('password');
    const authMsg = document.getElementById('authMsg');
    const loginBtn = document.getElementById('login');
    const signupBtn = document.getElementById('signup');
    const logoutBtn = document.getElementById('logout');

    const nameEl = document.getElementById('name');
    const priceEl = document.getElementById('price');
    const catEl = document.getElementById('category');
    const specsEl = document.getElementById('specs');
    const imageUrlEl = document.getElementById('imageUrl');
    const saveBtn = document.getElementById('save');
    const resetBtn = document.getElementById('reset');
    const saveMsg = document.getElementById('saveMsg');
    const listEl = document.getElementById('list');

    let editingId = null;

    // ì¸ì¦ ìƒíƒœ ë³€ê²½ ì²˜ë¦¬
    auth.onAuthStateChanged(user => {
      if (user) {
        authSection.style.display = 'none';
        appSection.style.display = 'block';
        loadProducts();
      } else {
        authSection.style.display = 'block';
        appSection.style.display = 'none';
      }
    });

    // ë¡œê·¸ì¸
    loginBtn.onclick = async () => {
      authMsg.textContent = '';
      try {
        await auth.signInWithEmailAndPassword(emailEl.value, pwEl.value);
      } catch (e) {
        authMsg.textContent = e.message;
      }
    };

    // íšŒì›ê°€ì… (ì²˜ìŒ ê´€ë¦¬ì ê³„ì • ë§Œë“¤ ë•Œë§Œ ì‚¬ìš©)
    signupBtn.onclick = async () => {
      authMsg.textContent = '';
      try {
        await auth.createUserWithEmailAndPassword(emailEl.value, pwEl.value);
        authMsg.textContent = 'ê´€ë¦¬ì ê³„ì •ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.';
      } catch (e) {
        authMsg.textContent = e.message;
      }
    };

    // ë¡œê·¸ì•„ì›ƒ
    logoutBtn.onclick = () => auth.signOut();

    // ì €ì¥ (ì‹ ê·œ/ìˆ˜ì •)
    saveBtn.onclick = async () => {
      saveMsg.textContent = '';
      const data = {
        name: nameEl.value.trim(),
        price: Number(priceEl.value || 0),
        category: catEl.value,
        specs: specsEl.value.trim(),
        imageUrl: imageUrlEl.value.trim(),
        updatedAt: new Date(),
      };
      if (!data.name) { saveMsg.textContent = 'ìƒí’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš”.'; return; }

      try {
        if (editingId) {
          await db.collection('products').doc(editingId).update(data);
          saveMsg.textContent = 'ìƒí’ˆì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.';
        } else {
          await db.collection('products').add({ ...data, createdAt: new Date() });
          saveMsg.textContent = 'ìƒí’ˆì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.';
        }
        clearForm();
        loadProducts();
      } catch (e) {
        saveMsg.textContent = e.message;
      }
    };

    resetBtn.onclick = () => clearForm();

    const clearForm = () => {
      editingId = null;
      nameEl.value = '';
      priceEl.value = '';
      catEl.value = 'ì‹ ë°œ';
      specsEl.value = '';
      imageUrlEl.value = '';
      saveBtn.textContent = 'ì €ì¥';
    };

    // ìƒí’ˆ ë¶ˆëŸ¬ì˜¤ê¸°
    const loadProducts = async () => {
      listEl.innerHTML = '';
      const snap = await db.collection('products').orderBy('createdAt', 'desc').get();
      if (snap.empty) {
        listEl.innerHTML = '<tr><td colspan="5" class="muted">ë“±ë¡ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
        return;
      }
      snap.forEach(doc => {
        const p = { id: doc.id, ...doc.data() };
        const tr = document.createElement('tr');
        const createdAt = p.createdAt?.toDate ? p.createdAt.toDate() : new Date();
        tr.innerHTML = `
          <td>${p.name}</td>
          <td>${p.category}</td>
          <td>${Number(p.price).toLocaleString('ko-KR')}</td>
          <td>${createdAt.toLocaleString('ko-KR')}</td>
          <td>
            <button class="btn" data-edit="${p.id}">ìˆ˜ì •</button>
            <button class="btn danger" data-del="${p.id}">ì‚­ì œ</button>
          </td>
        `;
        listEl.appendChild(tr);

        tr.querySelector('[data-edit]').onclick = () => {
          editingId = p.id;
          nameEl.value = p.name || '';
          priceEl.value = p.price || 0;
          catEl.value = p.category || 'ì‹ ë°œ';
          specsEl.value = p.specs || '';
          imageUrlEl.value = p.imageUrl || '';
          saveBtn.textContent = 'ìˆ˜ì • ì €ì¥';
          window.scrollTo({ top: 0, behavior: 'smooth' });
        };

        tr.querySelector('[data-del]').onclick = async () => {
          if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
          await db.collection('products').doc(p.id).delete();
          loadProducts();
        };
      });
    };
  </script>
</body>
</html>


